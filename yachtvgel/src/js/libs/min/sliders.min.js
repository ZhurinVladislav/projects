document.addEventListener('DOMContentLoaded', () => {
  const yachtSlider = () => {
    if (!document.getElementById('yacht-slider')) return;

    const swiper = new Swiper('.slider-bottom', {
      spaceBetween: 10,
      speed: 700,
      loop: true,
      watchSlidesProgress: true,
      lazy: true,
      breakpoints: {
        // when window width is >= 320px
        60: {
          slidesPerView: 3,
        },
        // when window width is >= 480px
        768: {
          slidesPerView: 4,
        },
        // when window width is >= 640px
        1360: {
          slidesPerView: 5,
        },
      },
      keyboard: {
        enabled: true,
        onlyInViewport: false,
      },
    });

    const swiper2 = new Swiper('.slider-top', {
      spaceBetween: 10,
      speed: 700,
      loop: true,
      navigation: {
        nextEl: '#slider-top-btn-next',
        prevEl: '#slider-top-btn-prev',
      },
      thumbs: {
        swiper: swiper,
      },
      keyboard: {
        enabled: true,
        onlyInViewport: false,
      },
    });

    $('#yacht-slider').lightGallery({
      thumbnail: false,
      share: false,
      selector: '.slider-top__slide',
      getCaptionFromTitleOrAlt: false,
    });
  };

  yachtSlider();

  const eventsSwiper = () => {
    if (!document.getElementById('events-swiper')) return;

    const swiper = new Swiper('#events-swiper', {
      slidesPerView: 4,
      spaceBetween: 20,
      grabCursor: true,
      loop: false,
      speed: 400,
      slideActiveClass: 'events-swiper__slide_active',
      navigation: {
        lockClass: 'swiper-navigation__btn_lock',
        disabledClass: 'swiper-navigation__btn_disable',
        nextEl: '#events-btn-next',
        prevEl: '#events-btn-prev',
      },
      keyboard: {
        enabled: true,
        onlyInViewport: false,
      },
      breakpoints: {
        // when window width is >= 320px
        60: {
          slidesPerView: 1,
        },
        // when window width is >= 480px
        768: {
          slidesPerView: 3,
        },
        // when window width is >= 640px
        1360: {
          slidesPerView: 4,
        },
      },
    });
  };
  eventsSwiper();

  /**
   * Инициализация слайдера на странице яхты в блоке похожие яхты
   */
  const yachtOtherSlider = () => {
    if (!document.getElementById('yacht-other')) return;

    const slider = new Swiper('#yacht-other', {
      spaceBetween: 20,
      grabCursor: true,
      loop: true,
      speed: 400,
      navigation: {
        disabledClass: 'slider__btn_disable',
        nextEl: '#yacht-other-btn-next',
        prevEl: '#yacht-other-btn-prev',
      },
      keyboard: {
        enabled: true,
        onlyInViewport: false,
      },
      breakpoints: {
        60: {
          slidesPerView: 1,
        },
        614: {
          slidesPerView: 2,
        },
        768: {
          slidesPerView: 3,
        },
        1360: {
          slidesPerView: 4,
        },
      },
    });
  };

  yachtOtherSlider();

  // ДОБАВЛЕНИЕ ОТСТУПА СПРАВА ПРИ ОТКРЫТИЕ ГАЛЕРИИ
  const addIndent = () => {
    const html = document.querySelector('html');
    const body = window.document.body;

    html.addEventListener('click', () => {
      body.classList.contains('lg-on') ? html.classList.add('galleryActive') : html.classList.remove('galleryActive');
    });

    // УБИРАЕМ КЛАСС ПРИ НАЖАТИЕ НА "ESC"
    window.addEventListener('keydown', e => {
      if (e.key === 'Escape') html.classList.remove('galleryActive');
    });
  };
  addIndent();
});
