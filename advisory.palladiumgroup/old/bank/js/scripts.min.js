/*!

© kovrigin
Все права разрешены
красивый дизайн должен иметь красивый код®

https://github.com/htmlpluscss/

*/
window.addEventListener("load",()=>{localStorage.setItem("fastLoadScript",!0),document.documentElement.style.setProperty("--transitionDefault",".3s")}),window.cssAnimation=(e=>{let t,o,n=document.createElement("cssanimation");switch(e){case"animation":t={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};break;case"transition":t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}}for(o in t)if(void 0!==n.style[o])return t[o]}),window.isInViewport=(e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=window.innerHeight}),(e=>{e.length&&[...e].forEach(e=>{let t=!1,o=null;const n=e.querySelectorAll(".accordion__item");[...n].forEach(e=>{const a=e.querySelector(".accordion__btn"),r=e.querySelector(".accordion__head"),l=e.querySelector(".accordion__body"),c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"viewBox","0 0 24 24"),c.setAttributeNS(null,"width",24),c.setAttributeNS(null,"height",24),c.innerHTML='<line x1="19" x2="19" y1="7" y2="17"/><line x1="14" x2="24" y1="12" y2="12"/>',r.append(c),a.addEventListener("click",()=>{t=!0,e===o?(e.classList.remove("is-open"),o=null):(o=e,[...n].forEach(t=>t.classList.toggle("is-open",t===e)))}),l.addEventListener(window.cssAnimation("transition"),()=>{t&&o&&!window.isInViewport(r)&&r.scrollIntoView({behavior:"smooth"}),t=!1})})})})(document.querySelectorAll(".accordion")),(e=>{const t="6LdjubYiAAAAAJCJFaBWu5DDvJWUxBrApeqJF_WC",o=()=>{[...e].forEach(e=>{e.removeEventListener("input",o)});const n=document.createElement("script");n.src="https://www.google.com/recaptcha/api.js?render="+t,document.head.appendChild(n)},n=new URLSearchParams(location.search);[...e].forEach(e=>{e.elements.url&&(e.elements.url.value=location.search),e.addEventListener("input",o),e.addEventListener("change",()=>{e.classList.toggle("not-rule",e.querySelectorAll(".checkbox__input").length!==e.querySelectorAll(".checkbox__input:checked").length)}),e.addEventListener("submit",o=>{o.preventDefault(),"undefined"==typeof grecaptcha?alert("Error! Google reCaptcha"):grecaptcha.ready(()=>{grecaptcha.execute(t).then(t=>{let o=null;const a=new FormData(e),r=e.querySelector(".form__submit");a.append("g_recaptcha_response",t),n.forEach((e,t)=>{t.includes("utm")&&a.append(t,e),t.includes("goal")&&(a.append(t,e),o=e)}),r.disabled=!0,fetch(e.getAttribute("action"),{method:"POST",body:a}).then(e=>e.json()).then(t=>{if(console.log(t),r.disabled=!1,e.classList.contains("contact__form"))return void e.querySelector(".contact__form-done").classList.remove("hide");document.querySelector(".modal-done__title").innerHTML=t.title,document.querySelector(".modal-done__message").innerHTML=t.message,document.querySelectorAll(".modal-done__ico svg")[0].classList.toggle("hide","ok"!==t.status),document.querySelectorAll(".modal-done__ico svg")[1].classList.toggle("hide","ok"===t.status);const n=new CustomEvent("modalShow",{detail:{selector:"done"}});modal.dispatchEvent(n),e.reset(),o&&ym(91004279,"reachGoal",o)})})})})})})(document.querySelectorAll(".form")),(e=>{if(!e.length)return;const t=document.createElement("script");t.src="/js/inputmask.min.js",t.onload=(()=>{[...e].forEach(e=>{let t;e.classList.contains("inputmask--phone")&&(t=new Inputmask({mask:e.getAttribute("data-mask"),placeholder:"0"})),t.mask(e)})}),setTimeout(()=>document.head.appendChild(t),localStorage.getItem("fastLoadScript")?0:1e4)})(document.querySelectorAll(".inputmask")),(e=>{if(!e)return;const t=e.querySelectorAll(".modal__item"),o=(document.querySelectorAll("[data-modal]"),document.querySelector(".wrapper")),n=document.querySelector("#modal-form"),a=document.querySelector("#modal-title"),r=a.innerHTML;let l=null,c=window.pageYOffset;e.addEventListener("hide",()=>{document.body.classList.remove("modal-show"),o.style.top=0,window.scrollTo(0,c),l=!1,window.requestAnimationFrame(()=>document.documentElement.classList.remove("scroll-behavior-off"),500),document.querySelector("#modal-video").innerHTML=""}),e.addEventListener("keyup",t=>{"Escape"===t.key&&e.dispatchEvent(new Event("hide"))});const i=(i,s)=>{l||(c=window.pageYOffset),s?(a.textContent=s,n.elements.subject.value=s.trim()):(a.innerHTML=r,n.elements.subject.value=a.textContent.trim()),l=e.querySelector(".modal__item--"+i),[...t].forEach(e=>e.classList.toggle("visuallyhidden",e!==l)),document.documentElement.classList.add("scroll-behavior-off"),window.requestAnimationFrame(()=>{o.style.top=-c+"px",document.body.classList.add("modal-show"),window.scrollTo(0,0),l.focus()})};e.addEventListener("click",t=>{(t.target.classList.contains("modal")||t.target.closest(".modal__close"))&&e.dispatchEvent(new Event("hide"))}),document.addEventListener("click",e=>{let t=e.target;for(;t!==document&&null!==t;)t.hasAttribute("data-modal")&&i(t.getAttribute("data-modal"),t.getAttribute("data-title")),t=t.parentNode}),e.addEventListener("modalShow",e=>i(e.detail.selector))})(document.querySelector(".modal")),(e=>{0!==e.length&&([...e].forEach(e=>{const t=e.querySelector(".phone-country__mask"),o=e.querySelector(".phone-country__code"),n=e.querySelector(".phone-country__toggle-flag");[...e.querySelectorAll(".phone-country__item")].forEach(e=>{e.addEventListener("click",()=>{let a,r=e.getAttribute("data-mask");r=(r=(r=r.replace(/\\9/g,"$")).replace(/9/g,"0")).replace(/\$/g,"9"),t.setAttribute("placeholder",r),t.value="",Inputmask(e.getAttribute("data-mask")).mask(t),(a=new Inputmask({mask:e.getAttribute("data-mask"),placeholder:"0"})).mask(t),t.focus(),o.value=e.getAttribute("data-code"),n.innerHTML=e.querySelector(".phone-country__item-flag").innerHTML})})}),window.addEventListener("click",t=>{const o=t.target.closest(".phone-country__toggle")?t.target.closest(".phone-country"):null;[...e].forEach(e=>{e.classList.toggle("is-open",e===o&&!1===o.classList.contains("is-open"))})}))})(document.querySelectorAll(".phone-country")),(e=>{if(e.length){const t=new URLSearchParams(location.search).get("start");null!==t&&[...e].forEach(e=>{!1===e.href.includes("start")&&(e.href=e.href+"?start="+t)})}})(document.querySelectorAll(".set-url-param")),(e=>{if(e.length){const t=document.querySelector("#modal-video");[...e].forEach(e=>{const o=e.getAttribute("data-youtube");e.addEventListener("click",e=>{e.preventDefault();const n=document.createElement("iframe");n.setAttribute("allowfullscreen",""),n.setAttribute("allow","autoplay"),n.setAttribute("src","https://www.youtube.com/embed/"+o+"?rel=0&showinfo=0&autoplay=1"),t.appendChild(n);const a=new CustomEvent("modalShow",{detail:{selector:"video"}});window.modal.dispatchEvent(a)})})}})(document.querySelectorAll("[data-youtube]"));